<div class="container mx-auto py-12" data-gallery-root>
  {{#if fields.title}}
    <div class="w-full">
      <h2 class="text-3xl font-semibold">{{fields.title}}</h2>
    </div>
  {{/if}}

  <div class="mt-6" data-gallery-grid>
    {{#each fields.images}}
      <figure
        class="overflow-hidden rounded-lg border border-border bg-surface"
        data-gallery-card
      >
        <button
          type="button"
          class="block w-full {{#unless ../fields.lightbox}}pointer-events-none{{/unless}}"
          data-gallery-item
          data-index="{{@index}}"
          aria-label="Open image"
        >
          <div data-gallery-media>
            <img
              src="{{src}}"
              alt="{{alt}}"
              loading="lazy"
              decoding="async"
              class="block h-auto w-full"
              data-gallery-img
            />
          </div>
        </button>

        {{#if caption}}
          <figcaption class="px-4 py-3 text-sm text-muted-text">
            {{caption}}
          </figcaption>
        {{/if}}
      </figure>
    {{/each}}
  </div>

  <!-- Lightbox (hidden by default) -->
  <div
    class="hidden"
    data-gallery-modal
    role="dialog"
    aria-modal="true"
    aria-label="Image preview"
  >
    <!-- Backdrop (visual only) -->
    <div
      data-gallery-backdrop
      style="position: fixed; inset: 0; background: rgba(0,0,0,0.6);"
    ></div>

    <!-- Full-screen click surface -->
    <div
      data-gallery-surface
      style="position: fixed; inset: 0; display: grid; place-items: center; padding: 24px;"
    >
      <!-- Dialog card -->
      <div
        data-gallery-dialog
        class="rounded-lg border border-border bg-surface"
        style="max-width: 960px; width: 100%; overflow: hidden;"
      >
        <div class="flex items-center justify-between px-4 py-3">
          <div class="text-sm text-muted-text" data-gallery-counter></div>

          <button
            type="button"
            class="w-10 h-10 flex justify-center items-center rounded-sm border border-border text-xl"
            data-gallery-close
            aria-label="Close"
          >
            X
          </button>
        </div>

        <div class="px-4 pb-4">
          <img
            data-gallery-active-img
            alt=""
            style="max-height: 70vh; width: 100%; object-fit: contain;"
          />
          <p
            class="mt-3 text-lg leading-6 text-muted-text"
            data-gallery-active-caption
          ></p>

          <div class="mt-4 flex items-center justify-between">
            <button
              type="button"
              class="px-3 py-1.5 rounded-lg border border-border"
              data-gallery-prev
              aria-label="Previous image"
            >
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="24" fill="currentColor" class="bi bi-arrow-left text-text" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"/>
                </svg>
            </button>

            <button
              type="button"
              class="px-3 py-1.5 rounded-lg border border-border"
              data-gallery-next
              aria-label="Next image"
            >
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="24" fill="currentColor" class="bi bi-arrow-left text-text rotate-180" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"/>
                </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
